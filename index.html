<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <style>
body { font-family: Arial, sans-serif; background: #f4f4f9; padding: 30px; display: flex; justify-content: center; }
    .container { width: 850px; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    h1 { text-align: center; color: #333; }
    form { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
    input, select, button { padding: 10px; border: 1px solid #ddd; border-radius: 8px; flex: 1; min-width: 150px; }
    button { background: #007bff; color: white; border: none; cursor: pointer; transition: 0.3s; }
    button:hover { background: #0056b3; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
    th { background: #007bff; color: white; }
    td button { margin: 2px; padding: 5px 10px; border-radius: 6px; }
    .edit { background: #28a745; }
    .delete { background: #dc3545; }
    .done { background: #17a2b8; }
    .prioridade-baixa { color: #28a745; font-weight: bold; }
    .prioridade-media { color: #fd7e14; font-weight: bold; }
    .prioridade-alta  { color: #dc3545; font-weight: bold; }
    .concluida { background: #d4edda !important; text-decoration: line-through; color: #155724 !important; }
    td .actions { display: inline-flex; gap: 5px; }
    td .actions button { flex: none; }

</style>
  <meta charset="UTF-8">
  <title>Gestão de Tarefas</title>

</head>
<body>
  <div class="container">
    <h1>Gestão de Tarefas</h1>
    <form id="taskForm">
      <input type="text" id="taskTitle" placeholder="Título da tarefa" required>
      <input type="text" id="taskParticipant" placeholder="Nome do participante" required>
      <select id="taskPriority">
        <option value="Alta">Alta</option>
        <option value="Média">Média</option>
        <option value="Baixa">Baixa</option>
      </select>
      <button type="submit">Adicionar</button>
    </form>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Título</th>
          <th>Participante</th>
          <th>Prioridade</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody id="taskTable"></tbody>
    </table>
  </div>
  <script >
    const form = document.getElementById("taskForm");
    const taskTitle = document.getElementById("taskTitle");
    const taskParticipant = document.getElementById("taskParticipant");
    const taskPriority = document.getElementById("taskPriority");
    const taskTable = document.getElementById("taskTable");
    let tasks = [];
    let idCounter = 1;

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const task = { id: idCounter++, title: taskTitle.value, participant: taskParticipant.value, priority: taskPriority.value, completed: false };
      tasks.push(task);
      sortTasks();
      renderTasks();
      form.reset();
    });

    function sortTasks() {
      const ordem = { "Alta": 1, "Média": 2, "Baixa": 3 };
      tasks.sort((a, b) => ordem[a.priority] - ordem[b.priority]);
    }

    function renderTasks() {
      taskTable.innerHTML = "";
      tasks.forEach((task) => {
        const prioridadeClass = task.priority === "Baixa" ? "prioridade-baixa" : task.priority === "Média" ? "prioridade-media" : "prioridade-alta";
        const concluidaClass = task.completed ? "concluida" : "";
        const finishButton = task.completed ? '' : `<button class="done" onclick="finishTask(${task.id})">Concluir</button>`;
        const row = `
          <tr id="row-${task.id}" class="${concluidaClass}">
            <td>${task.id}</td>
            <td>${task.title}</td>
            <td>${task.participant}</td>
            <td class="${prioridadeClass}">${task.priority}</td>
            <td>
              <div class="actions">
                ${finishButton}
                <button class="edit" onclick="editTask(${task.id})">Editar</button>
                <button class="delete" onclick="deleteTask(${task.id})">Excluir</button>
              </div>
            </td>
          </tr>
        `;
        taskTable.innerHTML += row;
      });
    }

    function editTask(id) {
      const row = document.getElementById(`row-${id}`);
      const task = tasks.find(t => t.id === id);
      row.innerHTML = `
        <td>${task.id}</td>
        <td><input type="text" id="editTitle-${id}" value="${task.title}"></td>
        <td><input type="text" id="editParticipant-${id}" value="${task.participant}"></td>
        <td>
          <select id="editPriority-${id}">
            <option ${task.priority === "Alta" ? "selected" : ""}>Alta</option>
            <option ${task.priority === "Média" ? "selected" : ""}>Média</option>
            <option ${task.priority === "Baixa" ? "selected" : ""}>Baixa</option>
          </select>
        </td>
        <td>
          <div class="actions">
            <button onclick="saveTask(${id})">Salvar</button>
            <button onclick="renderTasks()">Cancelar</button>
          </div>
        </td>
      `;
    }

    function saveTask(id) {
      const task = tasks.find(t => t.id === id);
      task.title = document.getElementById(`editTitle-${id}`).value;
      task.participant = document.getElementById(`editParticipant-${id}`).value;
      task.priority = document.getElementById(`editPriority-${id}`).value;
      task.completed = false;
      sortTasks();
      renderTasks();
    }

    function finishTask(id) {
      const task = tasks.find(t => t.id === id);
      task.completed = true;
      renderTasks();
    }

    function deleteTask(id) {
      tasks = tasks.filter(t => t.id !== id);
      renderTasks();
    }
  </script>
</body>
</html>